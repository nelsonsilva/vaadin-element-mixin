<link rel="import" href="../vaadin-usage-statistics/vaadin-usage-statistics.html">

<script>
if (!window.Vaadin) {
  window['Vaadin'] = {};
}

/**
 * Array of Vaadin custom element classes that have been finalized.
 */
window.Vaadin.registrations = window.Vaadin.registrations || [];

/**
 * @polymerMixin
 * @memberof Vaadin
 */
Vaadin.ElementMixin = superClass => {
  try {
    return class VaadinElementMixin extends superClass {
      /** @protected */
      static _finalizeClass() {
        super._finalizeClass();

        // Registers a class prototype for telemetry purposes.
        if (this.is) {
          window.Vaadin.registrations.push(this);
        }
      }
    };
  } finally {
    // This is run every time a new class is declared, not every time an instance is created
    if (window.Vaadin.usageStatistics) {
      window.Vaadin.usageStatistics();
    }
  }
};

</script>
